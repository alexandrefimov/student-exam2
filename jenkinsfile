node("jenkins-slave") {
    cleanWs()
    stage('Upload app Repo') {
        git credentialsId: 'ssh-git-key', url: 'git@github.com:alexandrefimov/student-exam2.git', branch: 'exam'
    }
    stage('Run Python Test') {
        sh """
        python3 -m venv venv
        . venv/bin/activate
        pip install -e '.[test]'
        coverage run -m pytest
        coverage report
        """
    }
}

